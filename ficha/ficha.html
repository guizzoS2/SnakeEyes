<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Personagem</title>
    <link rel="stylesheet" href="../src/css/ficha.css">
    <link rel="stylesheet" href="../src/css/cards.css">
    <link rel="stylesheet" href="../src/css/tambor.css">
    <link href="https://fonts.googleapis.com/css2?family=Rye&display=swap" rel="stylesheet">
    <link rel="icon" href="../src/images/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="character-div">
        <div class="social-info">
            <h2>Informações do Personagem
                <button id="editar-informacoes2" class="edit-btn">✏️</button>
            </h2>
            <ul>
                <li>
                    <strong>Nome do Personagem:</strong> 
                    <span class="view-mode" id="nome-personagem">Billy o Pistoleiro</span>
                    <input type="text" class="edit-mode2" id="input-nome-personagem">
                </li>
                <li>
                    <strong>Nome do Jogador:</strong> 
                    <span class="view-mode" id="nomeUsuario">João</span>
                    <input type="text" class="edit-mode2" id="nomeUsuario">
                </li>
                <li>
                    <strong>Recompensa:</strong> 
                    <span class="view-mode" id="recompensa">5000</span>
                    <input type="text" class="edit-mode2" id="input-recompensa">
                </li>
                <li>
                    <strong>Bando:</strong> 
                    <span class="view-mode" id="bando">Bando do Oeste</span>
                    <input type="text" class="edit-mode2" id="input-bando">
                </li>
                <li>
                    <strong>Antecedente:</strong> 
                    <span class="view-mode" id="antecedente">Viajante</span>
                    <input type="text" class="edit-mode2" id="input-antecedente">
                </li>
                <li>
                    <strong>Marca:</strong> 
                    <span class="view-mode" id="marca">Marca do Oeste</span>
                    <input type="text" class="edit-mode2" id="input-marca">
                </li>
            </ul>
        </div>        

        <div class="character-status">
            <h3>Status do Personagem</h3>
            <div class="status-box">
                <p><strong>Vitalidade:</strong></p>
                <div class="status-bar">
                    <button class="minus-btn" id="vitalidade-minus">-</button>
                    <div class="fill" id="vitalidade-bar"></div>
                    <div class="text" id="vitalidade-text"><span id="vitalidade-atual">--</span> / <span id="vitalidade-maxima">--</span></div>
                    <button class="plus-btn" id="vitalidade-plus">+</button>
                </div>
                
                <p><strong>Essência:</strong></p>
                <div class="stress-bar">
                    <button class="minus-btn" id="stress-minus">-</button>
                    <div class="fill" id="stress-bar"></div>
                    <div class="text" id="stress-text"><span id="estresse-atual">--</span> / <span id="estresse-maximo">--</span></div>
                    <button class="plus-btn" id="stress-plus">+</button>
                </div>
                
            </div>            

            <div class="character-photo">
                Foto do Personagem
            </div>
        </div>
    </div>

    <div class="character-div">
        <!-- Atributos do personagem -->
        <div class="atributes-info">
            <h2>Atributos
                <button id="editar-atributos" class="edit-btn">✏️</button>
            </h2>

            <div class="atributos-area">
                <ul>
                    <ul>
                        <li>
                            <strong>Força:</strong> 
                            <span class="view-mode" id="atributo-forca">0</span>
                            <input type="number" class="edit-mode" data-atributo="forca">
                        </li>
                        <li>
                            <strong>Sagacidade:</strong> 
                            <span class="view-mode" id="atributo-sagacidade">0</span>
                            <input type="number" class="edit-mode" data-atributo="sagacidade">
                        </li>
                        <li>
                            <strong>Mente:</strong> 
                            <span class="view-mode" id="atributo-mente">0</span>
                            <input type="number" class="edit-mode" data-atributo="mente">
                        </li>
                        <li>
                            <strong>Resiliência:</strong> 
                            <span class="view-mode" id="atributo-resiliencia">0</span>
                            <input type="number" class="edit-mode" data-atributo="resiliencia">
                        </li>
                        <li>
                            <strong>Sabedoria:</strong> 
                            <span class="view-mode" id="atributo-sabedoria">0</span>
                            <input type="number" class="edit-mode" data-atributo="sabedoria">
                        </li>
                        <li>
                            <strong>Celeridade:</strong> 
                            <span class="view-mode" id="atributo-celeridade">0</span>
                            <input type="number" class="edit-mode" data-atributo="celeridade">
                        </li>
                    </ul>
                </ul>
                <div class="atributos-extra">
                    <div class="tambor-container">
                        <div class="cylinder" onclick="spin()">
                            <div class="rotating-container">
                                <div class="edge-circles">
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                </div>
                                <div class="ammo-slots">
                                    <div><span>1</span></div>
                                    <div><span>2</span></div>
                                    <div><span>3</span></div>
                                    <div><span>4</span></div>
                                    <div><span>5</span></div>
                                    <div><span>6</span></div>
                                </div>
                            </div>
                            <div class="center-hole">
                                <div class="inner-black-circle"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
        <div class="habilidades-info">
            <h2>Habilidades 
                <button id="gerenciar-habilidades" class="habilidades-button">+</button>
            </h2>
            <ul id="habilidades-lista">
            </ul>
        </div>
        <div id="habilidades-modal" class="modal hidden">
            <div class="modal-content">
                <button id="fechar-modal" class="close-button">X</button>
        
                <div class="modal-tabs">
                    <button id="tab-habilidades" class="tab active">Habilidades</button>
                    <button id="tab-marcas" class="tab">Marcas</button>
                </div>
        
                <div id="modal-habilidades" class="tab-content">
                    <ul id="habilidades-lista-modal"></ul>
                </div>
                <div id="modal-marcas" class="tab-content hidden">
                    <ul id="marcas-lista-modal"></ul>
                </div>
            </div>
        </div>
        
    </div>

    <div class="character-div">
        <div class="card-game-container">
            <div class="column">
                <div class="container">
                    <div id="deck" class="deck" title="Clique para comprar uma carta">
                        <span id="deck-count" class="tooltip">52</span>
                    </div>
                    <div id="discard-pile" class="discard-pile"></div>
                </div>
    
                <div id="discard-modal" class="modal hidden">
                    <div class="modal-content">
                        <button id="close-modal" class="close-button">X</button>
                        <div id="discarded-cards" class="discarded-cards"></div>
                    </div>
                </div>
    
                <div class="container">
                    <div id="hand" class="hand"></div>
                    <div id="hand-controls">
                        <button id="sort-by-suit">Ordenar por Naipe</button>
                        <button id="sort-by-value">Ordenar por Valor</button>
                    </div>
                    <button id="restart-button">Restart</button>
                </div>
            </div>
        </div>
    </div>
    
    
    <script type="module" src="../src/js/cardgame.js"></script>
    <script type="module" src="../src/js/ficha.js"></script>
    <script>
        let currentRotation = 0;
        let isSpinning = false;

        function spin() {
            if (isSpinning) return;
            isSpinning = true;

            const randomNumber = Math.floor(Math.random() * 6) + 1;
            const targetDegree = (randomNumber - 1) * 60;
            const currentDegree = currentRotation % 360;

            let delta = (targetDegree - currentDegree + 360) % 360;
            const totalRotation = currentRotation + 360 * 2 + delta;

            const rotatingContainer = document.querySelector('.rotating-container');

            rotatingContainer.style.transition = 'transform 3s cubic-bezier(0.25, 0.1, 0.25, 1)';
            rotatingContainer.style.transform = `rotate(${totalRotation}deg)`;

            currentRotation = totalRotation;

            setTimeout(() => {
                isSpinning = false;
                rotatingContainer.style.transition = 'none';
            }, 3000);
        }
    </script>
</body>
</html>